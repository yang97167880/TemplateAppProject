Index: app/src/main/java/com/yiflyplan/app/fragment/RegisteredFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/*\n * Copyright (C) 2021 xuexiangjys(xuexiangjys@163.com)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\npackage com.yiflyplan.app.fragment;\n\nimport android.Manifest;\nimport android.annotation.SuppressLint;\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.database.Cursor;\nimport android.graphics.Bitmap;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.Environment;\nimport android.provider.MediaStore;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\nimport com.xuexiang.xaop.annotation.SingleClick;\nimport com.xuexiang.xpage.annotation.Page;\nimport com.xuexiang.xui.utils.KeyboardUtils;\nimport com.xuexiang.xui.widget.actionbar.TitleBar;\nimport com.xuexiang.xui.widget.dialog.bottomsheet.BottomSheet.BottomListSheetBuilder;\nimport com.xuexiang.xui.widget.edittext.materialedittext.MaterialEditText;\nimport com.xuexiang.xui.widget.imageview.RadiusImageView;\nimport com.xuexiang.xui.widget.imageview.strategy.impl.GlideImageLoadStrategy;\nimport com.yiflyplan.app.R;\nimport com.yiflyplan.app.core.BaseFragment;\nimport com.yiflyplan.app.core.http.FormField;\nimport com.yiflyplan.app.core.http.MyHttp;\nimport com.yiflyplan.app.utils.XToastUtils;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Objects;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport androidx.core.content.FileProvider;\n\nimport butterknife.BindView;\nimport butterknife.OnClick;\n\nimport static android.app.Activity.RESULT_OK;\nimport static com.yiflyplan.app.fragment.LoginFragment.stringtoBitmap;\nimport static com.yiflyplan.app.utils.TextUtil.disallowSpacesUtil;\n\n@Page(name = \"注册\")\npublic class RegisteredFragment extends BaseFragment {\n\n\n    @BindView(R.id.iv_avatar)\n    ImageView ivAvatar;\n    @BindView(R.id.et_phone_number)\n    MaterialEditText etPhoneNumber;\n    @BindView(R.id.et_password_number)\n    MaterialEditText etPasswordNumber;\n    @BindView(R.id.et_confirm_password_number)\n    MaterialEditText etConfirmPasswordNumber;\n    @BindView(R.id.et_user_name)\n    MaterialEditText etUserName;\n    @BindView(R.id.et_verify_code)\n    MaterialEditText etVerifyCode;\n    @BindView(R.id.code_image)\n    ImageView codeImage;\n\n    private String savedVerificationCode;\n    private Bitmap verificationCodeImage;\n    private Uri mImageUri;\n    private File file;\n\n\n    public static final int TITLE_SIZE = 50;\n    public static final int TITLE_BAR_HEIGHT = 120;\n    private static final int REQUEST_IMAGE_GET = 0;\n    private static final int REQUEST_IMAGE_CAPTURE = 1;\n    private static final int REQUEST_BIG_IMAGE_CUTTING = 3;\n    private static final String IMAGE_FILE_NAME = \"icon.jpg\";\n\n\n    @Override\n    protected int getLayoutId() {\n        return R.layout.fragment_registered;\n    }\n\n    @Override\n    protected void initViews() {\n        getVerifyCode();\n        disallowSpacesUtil(etUserName);\n    }\n\n    @Override\n    protected TitleBar initTitle() {\n        TitleBar titleBar = super.initTitle();\n        titleBar.setTitleSize(TITLE_SIZE);\n        titleBar.setHeight(TITLE_BAR_HEIGHT);\n        return titleBar;\n    }\n\n    @SuppressLint(\"NonConstantResourceId\")\n    @SingleClick\n    @OnClick({R.id.btn_register, R.id.iv_avatar, R.id.et_verify_code, R.id.code_image})\n    public void onViewClicked(View view) {\n        switch (view.getId()) {\n            case R.id.code_image:\n                getVerifyCode();\n                break;\n            case R.id.btn_register:\n                if (mImageUri != null) {\n                    if (etPhoneNumber.validate()) {\n                        if (etUserName.isEmpty()) {\n                            XToastUtils.toast(\"用户名不能为空\");\n                        } else if (etUserName.validate()) {\n                            if (etPasswordNumber.validate()) {\n                                if (Objects.requireNonNull(etConfirmPasswordNumber.getText()).toString().equals(Objects.requireNonNull(etPasswordNumber.getText()).toString())) {\n                                    if (etVerifyCode.validate()) {\n                                        List<FormField<?>> formFields = new ArrayList<>();\n\n                                        FormField<String> formField1 = new FormField<>();\n                                        formField1.setFieldName(\"password\");\n                                        formField1.setFieldValue(etPasswordNumber.getText().toString());\n\n                                        FormField<String> formField2 = new FormField<>();\n                                        formField2.setFieldName(\"passwordAgain\");\n                                        formField2.setFieldValue(etConfirmPasswordNumber.getText().toString());\n\n                                        FormField<String> formField3 = new FormField<>();\n                                        formField3.setFieldName(\"tel\");\n                                        formField3.setFieldValue(String.valueOf(etPhoneNumber.getText()));\n\n                                        FormField<String> formField4 = new FormField<>();\n                                        formField4.setFieldName(\"userName\");\n                                        formField4.setFieldValue(String.valueOf(etUserName.getText()));\n\n                                        FormField<String> formField5 = new FormField<>();\n                                        formField5.setFieldName(\"verificationCode\");\n                                        formField5.setFieldValue(String.valueOf(etVerifyCode.getText()));\n\n                                        FormField<File> formField6 = new FormField<>();\n                                        formField6.setFieldName(\"userAvatar\");\n                                        formField6.setExtras(new FormField.Pair<>(\"filename\", file.getName()));\n                                        formField6.setContentType(\"image/jpeg\");\n                                        \n                                        formField6.setFieldValue(file);\n\n                                        formFields.add(formField1);\n                                        formFields.add(formField2);\n                                        formFields.add(formField3);\n                                        formFields.add(formField4);\n                                        formFields.add(formField5);\n                                        formFields.add(formField6);\n\n\n                                        MyHttp.postForm(\"/user/register\", \"\", formFields, new MyHttp.Callback() {\n                                            @Override\n                                            public void success(JSONObject data) throws JSONException {\n                                                XToastUtils.toast(\"注册成功\");\n                                                openNewPage(LoginFragment.class);\n                                            }\n\n                                            @Override\n                                            public void fail(JSONObject error) throws JSONException {\n                                                if (error.getInt(\"code\") == 40004) {\n                                                    getVerifyCode();\n                                                }\n                                            }\n                                        });\n                                    }\n                                } else {\n                                    XToastUtils.toast(\"重复密码与原密码不匹配\");\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    XToastUtils.toast(\"请更改头像\");\n                }\n\n                break;\n            case R.id.et_verify_code:\n                KeyboardUtils.isSoftInputShow(getActivity());\n                KeyboardUtils.showSoftInputForce(getActivity());\n                break;\n            case R.id.iv_avatar:\n                showBottomSheetList(ivAvatar);\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    /**\n     * 弹窗\n     *\n     * @param v\n     */\n    private void showBottomSheetList(View v) {\n        new BottomListSheetBuilder(getActivity())\n                .addItem(\"拍照\")\n                .addItem(\"从相册选择\")\n                .setOnSheetItemClickListener((dialog, itemView, position, tag) -> {\n                    dialog.dismiss();\n                    switch (position) {\n                        case 0:\n                            // 拍照及文件权限申请\n                            if (ContextCompat.checkSelfPermission(getActivity(),\n                                    Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED\n                                    || ContextCompat.checkSelfPermission(getActivity(),\n                                    Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                                    != PackageManager.PERMISSION_GRANTED) {\n                                // 权限还没有授予，需要在这里写申请权限的代码\n                                ActivityCompat.requestPermissions(getActivity(),\n                                        new String[]{Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE}, 300);\n                            } else {\n                                // 权限已经申请，直接拍照\n                                dialog.dismiss();\n                                imageCapture();\n                            }\n\n                            break;\n                        case 1:\n                            // 文件权限申请\n                            if (ContextCompat.checkSelfPermission(getActivity(),\n                                    Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n                                //权限还没有授予，需要在这里写申请权限的代码\n                                ActivityCompat.requestPermissions(getActivity(),\n                                        new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 200);\n                            } else {\n                                // 如果权限已经申请过，直接进行图片选择\n                                dialog.dismiss();\n                                Intent intent = new Intent(Intent.ACTION_PICK);\n                                intent.setType(\"image/*\");\n                                // 判断系统中是否有处理该 Intent 的 Activity\n                                if (intent.resolveActivity(getActivity().getPackageManager()) != null) {\n                                    startActivityForResult(intent, REQUEST_IMAGE_GET);\n                                } else {\n                                    Toast.makeText(getActivity(), \"未找到图片查看器\", Toast.LENGTH_SHORT).show();\n                                }\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                })\n                .build()\n                .show();\n    }\n\n\n    /**\n     * 处理回调结果\n     */\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        // 回调成功\n        if (resultCode == RESULT_OK) {\n            switch (requestCode) {\n                // 大图切割\n                case REQUEST_BIG_IMAGE_CUTTING:\n                    RadiusImageView radiusImageView = findViewById(R.id.iv_avatar);\n                    GlideImageLoadStrategy lodeImg = new GlideImageLoadStrategy();\n                    lodeImg.loadImage(radiusImageView, mImageUri);\n                    break;\n                // 相册选取\n                case REQUEST_IMAGE_GET:\n                    try {\n                        startBigPhotoZoom(data.getData());\n                    } catch (NullPointerException e) {\n                        e.printStackTrace();\n                    }\n                    break;\n                // 拍照\n                case REQUEST_IMAGE_CAPTURE:\n                    File temp = new File(Environment.getExternalStorageDirectory() + \"/\" + IMAGE_FILE_NAME);\n                    startBigPhotoZoom(temp);\n            }\n        }\n    }\n\n\n    /**\n     * 处理权限回调结果\n     */\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        switch (requestCode) {\n            case 200:\n                if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                    Intent intent = new Intent(Intent.ACTION_PICK);\n                    intent.setType(\"image/*\");\n                    // 判断系统中是否有处理该 Intent 的 Activity\n                    if (intent.resolveActivity(getActivity().getPackageManager()) != null) {\n                        startActivityForResult(intent, REQUEST_IMAGE_GET);\n                    } else {\n                        XToastUtils.toast(\"未找到图片查看器\");\n                    }\n                } else {\n                }\n                break;\n            case 300:\n                if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                    imageCapture();\n                } else {\n                }\n                break;\n        }\n    }\n\n\n    /**\n     * 判断系统及拍照\n     */\n    private void imageCapture() {\n        Intent intent;\n        Uri pictureUri;\n        File pictureFile = new File(Environment.getExternalStorageDirectory(), IMAGE_FILE_NAME);\n        // 判断当前系统\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n            intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n            intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n            pictureUri = FileProvider.getUriForFile(getContext(),\n                    \"com.yiflyplan.app.fileProvider\", pictureFile);\n        } else {\n            intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n            pictureUri = Uri.fromFile(pictureFile);\n        }\n        // 去拍照\n        intent.putExtra(MediaStore.EXTRA_OUTPUT, pictureUri);\n        startActivityForResult(intent, REQUEST_IMAGE_CAPTURE);\n    }\n\n\n    /**\n     * 大图模式切割图片\n     * 直接创建一个文件将切割后的图片写入\n     */\n    public void startBigPhotoZoom(File inputFile) {\n        // 创建大图文件夹\n        Uri imageUri = null;\n        if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {\n            String storage = Environment.getExternalStorageDirectory().getPath();\n            File dirFile = new File(storage + \"/bigIcon\");\n            if (!dirFile.exists()) {\n                if (!dirFile.mkdirs()) {\n                    Log.e(\"TAG\", \"文件夹创建失败\");\n                } else {\n                    Log.e(\"TAG\", \"文件夹创建成功\");\n                }\n            }\n            file = new File(dirFile, System.currentTimeMillis() + \".jpg\");\n            imageUri = Uri.fromFile(file);\n            mImageUri = imageUri; // 将 uri 传出，方便设置到视图中\n        }\n\n        // 开始切割\n        Intent intent = new Intent(\"com.android.camera.action.CROP\");\n        intent.setDataAndType(getImageContentUri(getContext(), inputFile), \"image/*\");\n        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        intent.putExtra(\"crop\", \"true\");\n        intent.putExtra(\"aspectX\", 1); // 裁剪框比例\n        intent.putExtra(\"aspectY\", 1);\n        intent.putExtra(\"outputX\", 600); // 输出图片大小\n        intent.putExtra(\"outputY\", 600);\n        intent.putExtra(\"scale\", true);\n        intent.putExtra(\"return-data\", false); // 不直接返回数据\n        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri); // 返回一个文件\n        intent.putExtra(\"outputFormat\", Bitmap.CompressFormat.JPEG.toString());\n        startActivityForResult(intent, REQUEST_BIG_IMAGE_CUTTING);\n    }\n\n\n    public void startBigPhotoZoom(Uri uri) {\n        // 创建大图文件夹\n        Uri imageUri = null;\n        if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {\n            String storage = Environment.getExternalStorageDirectory().getPath();\n            File dirFile = new File(storage + \"/bigIcon\");\n            if (!dirFile.exists()) {\n                if (!dirFile.mkdirs()) {\n                    Log.e(\"TAG\", \"文件夹创建失败\");\n                } else {\n                    Log.e(\"TAG\", \"文件夹创建成功\");\n                }\n            }\n            file = new File(dirFile, System.currentTimeMillis() + \".jpg\");\n            imageUri = Uri.fromFile(file);\n            mImageUri = imageUri; // 将 uri 传出，方便设置到视图中\n        }\n\n        // 开始切割\n        Intent intent = new Intent(\"com.android.camera.action.CROP\");\n        intent.setDataAndType(uri, \"image/*\");\n        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        intent.putExtra(\"crop\", \"true\");\n        intent.putExtra(\"aspectX\", 1); // 裁剪框比例\n        intent.putExtra(\"aspectY\", 1);\n        intent.putExtra(\"outputX\", 600); // 输出图片大小\n        intent.putExtra(\"outputY\", 600);\n        intent.putExtra(\"scale\", true);\n        intent.putExtra(\"return-data\", false); // 不直接返回数据\n        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri); // 返回一个文件\n        intent.putExtra(\"outputFormat\", Bitmap.CompressFormat.JPEG.toString());\n        startActivityForResult(intent, REQUEST_BIG_IMAGE_CUTTING);\n    }\n\n    public Uri getImageContentUri(Context context, File imageFile) {\n        String filePath = imageFile.getAbsolutePath();\n        Cursor cursor = context.getContentResolver().query(\n                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                new String[]{MediaStore.Images.Media._ID},\n                MediaStore.Images.Media.DATA + \"=? \",\n                new String[]{filePath}, null);\n\n        if (cursor != null && cursor.moveToFirst()) {\n            int id = cursor.getInt(cursor\n                    .getColumnIndex(MediaStore.MediaColumns._ID));\n            Uri baseUri = Uri.parse(\"content://media/external/images/media\");\n            return Uri.withAppendedPath(baseUri, \"\" + id);\n        } else {\n            if (imageFile.exists()) {\n                ContentValues values = new ContentValues();\n                values.put(MediaStore.Images.Media.DATA, filePath);\n                return context.getContentResolver().insert(\n                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n            } else {\n                return null;\n            }\n        }\n    }\n\n\n    /**\n     * 获取验证码\n     */\n    private void getVerifyCode() {\n\n        LinkedHashMap<String, String> params = new LinkedHashMap<>();\n        params.put(\"type\", \"0\");\n        MyHttp.get(\"/captcha/getRegisteredVerificationCode\", \"\", params, new MyHttp.Callback() {\n            @Override\n            public void success(JSONObject data) throws JSONException {\n                savedVerificationCode = data.toString();\n                verificationCodeImage = stringtoBitmap(savedVerificationCode);\n                codeImage.setImageBitmap(verificationCodeImage);\n            }\n\n            @Override\n            public void fail(JSONObject error) {\n                codeImage.setImageResource(R.drawable.ic_img);\n                Log.e(\"TAG:\", error.toString());\n\n            }\n        });\n\n    }\n\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n    }\n\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/yiflyplan/app/fragment/RegisteredFragment.java	(revision 2b03d0c83ce370f5e690d83aa63c6d1617b5e930)
+++ app/src/main/java/com/yiflyplan/app/fragment/RegisteredFragment.java	(date 1619976301000)
@@ -55,13 +55,11 @@
 import java.util.ArrayList;
 import java.util.LinkedHashMap;
 import java.util.List;
-import java.util.Objects;
 
 import androidx.annotation.NonNull;
 import androidx.core.app.ActivityCompat;
 import androidx.core.content.ContextCompat;
 import androidx.core.content.FileProvider;
-
 import butterknife.BindView;
 import butterknife.OnClick;
 
@@ -70,7 +68,7 @@
 import static com.yiflyplan.app.utils.TextUtil.disallowSpacesUtil;
 
 @Page(name = "注册")
-public class RegisteredFragment extends BaseFragment {
+public class RegisteredFragment  extends BaseFragment {
 
 
     @BindView(R.id.iv_avatar)
@@ -123,48 +121,47 @@
 
     @SuppressLint("NonConstantResourceId")
     @SingleClick
-    @OnClick({R.id.btn_register, R.id.iv_avatar, R.id.et_verify_code, R.id.code_image})
+    @OnClick({R.id.btn_register, R.id.iv_avatar,R.id.et_verify_code, R.id.code_image})
     public void onViewClicked(View view) {
         switch (view.getId()) {
             case R.id.code_image:
                 getVerifyCode();
                 break;
             case R.id.btn_register:
-                if (mImageUri != null) {
+                if (mImageUri!=null){
                     if (etPhoneNumber.validate()) {
-                        if (etUserName.isEmpty()) {
+                        if(etUserName.isEmpty()){
                             XToastUtils.toast("用户名不能为空");
-                        } else if (etUserName.validate()) {
-                            if (etPasswordNumber.validate()) {
-                                if (Objects.requireNonNull(etConfirmPasswordNumber.getText()).toString().equals(Objects.requireNonNull(etPasswordNumber.getText()).toString())) {
+                        }else if(etUserName.validate()) {
+                            if(etPasswordNumber.validate()){
+                                if(etConfirmPasswordNumber.getText().toString().equals(etPasswordNumber.getText().toString())){
                                     if (etVerifyCode.validate()) {
-                                        List<FormField<?>> formFields = new ArrayList<>();
+                                        List<FormField> formFields = new ArrayList<>();
 
-                                        FormField<String> formField1 = new FormField<>();
+                                        FormField formField1 = new FormField();
                                         formField1.setFieldName("password");
                                         formField1.setFieldValue(etPasswordNumber.getText().toString());
 
-                                        FormField<String> formField2 = new FormField<>();
+                                        FormField formField2 = new FormField();
                                         formField2.setFieldName("passwordAgain");
                                         formField2.setFieldValue(etConfirmPasswordNumber.getText().toString());
 
-                                        FormField<String> formField3 = new FormField<>();
+                                        FormField formField3 = new FormField();
                                         formField3.setFieldName("tel");
                                         formField3.setFieldValue(String.valueOf(etPhoneNumber.getText()));
 
-                                        FormField<String> formField4 = new FormField<>();
+                                        FormField formField4 = new FormField();
                                         formField4.setFieldName("userName");
                                         formField4.setFieldValue(String.valueOf(etUserName.getText()));
 
-                                        FormField<String> formField5 = new FormField<>();
+                                        FormField formField5 = new FormField();
                                         formField5.setFieldName("verificationCode");
                                         formField5.setFieldValue(String.valueOf(etVerifyCode.getText()));
 
-                                        FormField<File> formField6 = new FormField<>();
+                                        FormField formField6 = new FormField();
                                         formField6.setFieldName("userAvatar");
-                                        formField6.setExtras(new FormField.Pair<>("filename", file.getName()));
-                                        formField6.setContentType("image/jpeg");
-                                        
+                                        formField6.setExtras(new FormField.Pair("filename",file.getName()));
+                                        formField6.setContentType("application/x-jpg");
                                         formField6.setFieldValue(file);
 
                                         formFields.add(formField1);
@@ -174,7 +171,6 @@
                                         formFields.add(formField5);
                                         formFields.add(formField6);
 
-
                                         MyHttp.postForm("/user/register", "", formFields, new MyHttp.Callback() {
                                             @Override
                                             public void success(JSONObject data) throws JSONException {
@@ -190,13 +186,13 @@
                                             }
                                         });
                                     }
-                                } else {
+                                }else{
                                     XToastUtils.toast("重复密码与原密码不匹配");
                                 }
                             }
                         }
                     }
-                } else {
+                }else {
                     XToastUtils.toast("请更改头像");
                 }
 
@@ -216,11 +212,10 @@
 
     /**
      * 弹窗
-     *
      * @param v
      */
     private void showBottomSheetList(View v) {
-        new BottomListSheetBuilder(getActivity())
+           new BottomListSheetBuilder(getActivity())
                 .addItem("拍照")
                 .addItem("从相册选择")
                 .setOnSheetItemClickListener((dialog, itemView, position, tag) -> {
@@ -258,7 +253,8 @@
                                 // 判断系统中是否有处理该 Intent 的 Activity
                                 if (intent.resolveActivity(getActivity().getPackageManager()) != null) {
                                     startActivityForResult(intent, REQUEST_IMAGE_GET);
-                                } else {
+                                }
+                                else {
                                     Toast.makeText(getActivity(), "未找到图片查看器", Toast.LENGTH_SHORT).show();
                                 }
                             }
@@ -272,6 +268,8 @@
     }
 
 
+
+
     /**
      * 处理回调结果
      */
@@ -285,7 +283,7 @@
                 case REQUEST_BIG_IMAGE_CUTTING:
                     RadiusImageView radiusImageView = findViewById(R.id.iv_avatar);
                     GlideImageLoadStrategy lodeImg = new GlideImageLoadStrategy();
-                    lodeImg.loadImage(radiusImageView, mImageUri);
+                    lodeImg.loadImage(radiusImageView,mImageUri);
                     break;
                 // 相册选取
                 case REQUEST_IMAGE_GET:
@@ -304,6 +302,7 @@
     }
 
 
+
     /**
      * 处理权限回调结果
      */
@@ -337,7 +336,7 @@
     /**
      * 判断系统及拍照
      */
-    private void imageCapture() {
+    private void imageCapture(){
         Intent intent;
         Uri pictureUri;
         File pictureFile = new File(Environment.getExternalStorageDirectory(), IMAGE_FILE_NAME);
@@ -396,6 +395,8 @@
     }
 
 
+
+
     public void startBigPhotoZoom(Uri uri) {
         // 创建大图文件夹
         Uri imageUri = null;
@@ -434,9 +435,9 @@
         String filePath = imageFile.getAbsolutePath();
         Cursor cursor = context.getContentResolver().query(
                 MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
-                new String[]{MediaStore.Images.Media._ID},
+                new String[] { MediaStore.Images.Media._ID },
                 MediaStore.Images.Media.DATA + "=? ",
-                new String[]{filePath}, null);
+                new String[] { filePath }, null);
 
         if (cursor != null && cursor.moveToFirst()) {
             int id = cursor.getInt(cursor
@@ -456,6 +457,7 @@
     }
 
 
+
     /**
      * 获取验证码
      */
@@ -470,7 +472,6 @@
                 verificationCodeImage = stringtoBitmap(savedVerificationCode);
                 codeImage.setImageBitmap(verificationCodeImage);
             }
-
             @Override
             public void fail(JSONObject error) {
                 codeImage.setImageResource(R.drawable.ic_img);
